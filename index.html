<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Dondlinger GC â€” Labs OS (2026)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Field-built systems. Live labs. Real prototypes under load." />

<style>
:root{
  --bg:#07090c;
  --fg:#e9eef5;
  --muted:#98a3b3;
  --glass: rgba(16, 20, 28, .58);
  --glass2: rgba(10, 12, 16, .52);
  --border: rgba(255,255,255,.10);
  --border2: rgba(255,255,255,.16);
  --accent:#f0a23b;
  --accent2:#63b3ff;
  --ok:#72ff9a;
  --warn:#ffd37a;
  --bad:#ff6b6b;
  --shadow: 0 18px 60px rgba(0,0,0,.55);
  --radius: 18px;
  --radius2: 26px;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --sans: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: radial-gradient(1200px 700px at 35% 20%, rgba(240,162,59,.10), transparent 60%),
              radial-gradient(900px 550px at 75% 35%, rgba(99,179,255,.08), transparent 62%),
              radial-gradient(1000px 800px at 45% 85%, rgba(114,255,154,.06), transparent 60%),
              var(--bg);
  color:var(--fg);
  font-family:var(--sans);
  overflow-x:hidden;
}

/* ===== Ambient noise + scanlines (subtle) ===== */
.noise{
  pointer-events:none;
  position:fixed; inset:0;
  opacity:.10;
  mix-blend-mode:overlay;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='190' height='190'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='190' height='190' filter='url(%23n)' opacity='.65'/%3E%3C/svg%3E");
  background-size: 220px 220px;
  animation: drift 9s linear infinite;
}
@keyframes drift { from{transform:translate3d(0,0,0)} to{transform:translate3d(-120px,80px,0)} }

.scanlines{
  pointer-events:none;
  position:fixed; inset:0;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,.03),
    rgba(255,255,255,.03) 1px,
    transparent 1px,
    transparent 5px
  );
  opacity:.07;
}

/* ===== Cursor glow ===== */
.glow{
  pointer-events:none;
  position:fixed;
  width:800px; height:800px;
  left:var(--mx, 50%); top:var(--my, 50%);
  transform:translate(-50%,-50%);
  background: radial-gradient(circle at center,
    rgba(240,162,59,.16),
    rgba(99,179,255,.08) 30%,
    transparent 62%);
  filter: blur(8px);
  opacity:.85;
  transition: opacity .25s ease;
}

/* ===== Layout ===== */
.wrap{
  max-width: 1320px;
  margin: 0 auto;
  padding: 28px 20px 90px;
}

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  position:sticky;
  top:0;
  z-index:40;
  padding: 12px 0;
  backdrop-filter: blur(10px);
}
.brand{
  display:flex;
  align-items:center;
  gap:12px;
}
.logo{
  width:40px;height:40px;
  border-radius:12px;
  background: linear-gradient(135deg, rgba(240,162,59,.95), rgba(99,179,255,.85));
  box-shadow: 0 16px 40px rgba(0,0,0,.4);
  position:relative;
  overflow:hidden;
}
.logo:after{
  content:"";
  position:absolute; inset:-60%;
  background: radial-gradient(circle, rgba(255,255,255,.35), transparent 60%);
  transform: rotate(25deg);
}
.brand h1{
  margin:0;
  font-size: 1.05rem;
  letter-spacing:.02em;
}
.brand p{
  margin:2px 0 0;
  color:var(--muted);
  font-size:.85rem;
  font-family: var(--mono);
}
.actions{
  display:flex;
  align-items:center;
  gap:10px;
}
.pill{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(12,14,18,.38);
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 30px rgba(0,0,0,.25);
}
kbd{
  font-family: var(--mono);
  font-size: .78rem;
  padding: 3px 7px;
  border-radius: 8px;
  border: 1px solid var(--border2);
  background: rgba(0,0,0,.25);
  color: var(--fg);
}

.btn{
  cursor:pointer;
  border:1px solid var(--border);
  background: rgba(14,18,24,.45);
  color: var(--fg);
  padding: 10px 12px;
  border-radius: 12px;
  transition: transform .12s ease, border-color .12s ease, background .12s ease;
}
.btn:hover{ border-color: rgba(240,162,59,.55); background: rgba(20,26,36,.55) }
.btn:active{ transform: translateY(1px) scale(.99) }

/* ===== Hero ===== */
.hero{
  display:grid;
  grid-template-columns: 1.25fr .75fr;
  gap:16px;
  margin-top: 18px;
  align-items:stretch;
}
@media (max-width: 920px){ .hero{ grid-template-columns: 1fr; } }

.card{
  border: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(16,20,28,.56), rgba(10,12,16,.40));
  backdrop-filter: blur(12px);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  overflow:hidden;
  position:relative;
}
.card::before{
  content:"";
  position:absolute; inset:-2px;
  background: radial-gradient(1200px 500px at 25% 15%, rgba(240,162,59,.12), transparent 45%),
              radial-gradient(900px 520px at 75% 30%, rgba(99,179,255,.10), transparent 45%),
              radial-gradient(900px 800px at 45% 90%, rgba(114,255,154,.06), transparent 55%);
  opacity:.9;
  pointer-events:none;
}

.hero-left{
  padding: 26px 26px 18px;
}
.tag{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(0,0,0,.22);
  font-family: var(--mono);
  font-size: .82rem;
  color: var(--muted);
}
.dot{
  width:10px;height:10px;border-radius:99px;
  background: var(--ok);
  box-shadow: 0 0 18px rgba(114,255,154,.45);
}
.hero-left h2{
  margin: 16px 0 10px;
  font-size: clamp(2.2rem, 4.4vw, 3.6rem);
  line-height: 1.05;
  letter-spacing: -0.02em;
}
.sub{
  margin: 0 0 18px;
  color: var(--muted);
  font-size: 1.05rem;
  max-width: 70ch;
}
.grid-metrics{
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap:10px;
  margin-top: 16px;
}
@media (max-width: 560px){ .grid-metrics{ grid-template-columns: 1fr; } }
.metric{
  border:1px solid var(--border);
  border-radius: 16px;
  padding: 12px 14px;
  background: rgba(0,0,0,.18);
}
.metric b{
  display:block;
  font-size: .9rem;
  letter-spacing:.02em;
}
.metric span{
  display:block;
  margin-top:6px;
  color: var(--muted);
  font-family: var(--mono);
  font-size: .82rem;
}

.hero-right{
  display:flex;
  flex-direction:column;
  gap:12px;
}
.hero-right .card{
  padding: 18px;
  border-radius: var(--radius2);
}
.stack{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.chip{
  padding: 7px 10px;
  border:1px solid var(--border);
  border-radius: 999px;
  background: rgba(0,0,0,.18);
  color: var(--muted);
  font-size: .82rem;
  font-family: var(--mono);
}
.chip.accent{ color: rgba(240,162,59,.95); border-color: rgba(240,162,59,.35) }
.chip.blue{ color: rgba(99,179,255,.95); border-color: rgba(99,179,255,.35) }
.chip.ok{ color: rgba(114,255,154,.95); border-color: rgba(114,255,154,.35) }
.hero-right h3{ margin:0 0 10px; font-size: 1rem; letter-spacing:.02em }
.hero-right p{ margin:0; color: var(--muted); font-size: .95rem; line-height: 1.45 }

/* ===== Labs section ===== */
.section-title{
  margin-top: 34px;
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:12px;
}
.section-title h3{
  margin:0;
  font-size: 1.25rem;
  letter-spacing:.01em;
}
.section-title .hint{
  color: var(--muted);
  font-family: var(--mono);
  font-size: .86rem;
}

.labs{
  display:grid;
  grid-template-columns: 420px 1fr;
  gap: 14px;
  margin-top: 14px;
}
@media (max-width: 980px){ .labs{ grid-template-columns: 1fr; } }

.list{
  padding: 10px;
}
.item{
  display:flex;
  gap:12px;
  padding: 12px;
  border-radius: 16px;
  border: 1px solid transparent;
  cursor:pointer;
  user-select:none;
  transition: background .12s ease, border-color .12s ease, transform .12s ease;
}
.item:hover{
  background: rgba(255,255,255,.04);
  border-color: rgba(255,255,255,.08);
}
.item.active{
  background: rgba(240,162,59,.07);
  border-color: rgba(240,162,59,.22);
}
.thumb{
  width:46px;height:46px;
  border-radius: 14px;
  border:1px solid var(--border);
  background:
    radial-gradient(circle at 30% 30%, rgba(240,162,59,.35), transparent 55%),
    radial-gradient(circle at 70% 40%, rgba(99,179,255,.25), transparent 55%),
    rgba(0,0,0,.22);
  position:relative;
  overflow:hidden;
  flex:0 0 auto;
}
.thumb:after{
  content:"";
  position:absolute; inset:-40%;
  background: radial-gradient(circle, rgba(255,255,255,.20), transparent 60%);
  transform: rotate(18deg);
}
.item h4{
  margin:0;
  font-size: .98rem;
  letter-spacing:.01em;
}
.item .meta{
  margin-top:6px;
  color: var(--muted);
  font-size: .86rem;
  line-height: 1.35;
}
.badges{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-top:8px;
}
.badge{
  font-family: var(--mono);
  font-size: .76rem;
  padding: 4px 8px;
  border-radius: 999px;
  border:1px solid var(--border);
  background: rgba(0,0,0,.16);
  color: var(--muted);
}
.badge.ok{ color: rgba(114,255,154,.9); border-color: rgba(114,255,154,.25) }
.badge.warn{ color: rgba(255,211,122,.95); border-color: rgba(255,211,122,.25) }
.badge.blue{ color: rgba(99,179,255,.95); border-color: rgba(99,179,255,.25) }
.badge.accent{ color: rgba(240,162,59,.95); border-color: rgba(240,162,59,.25) }

.viewer{
  overflow:hidden;
}
.viewer-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 12px 14px;
  border-bottom:1px solid var(--border);
  background: rgba(0,0,0,.10);
}
.viewer-title{
  display:flex;
  flex-direction:column;
  gap:2px;
  min-width:0;
}
.viewer-title b{
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.viewer-title span{
  color: var(--muted);
  font-family: var(--mono);
  font-size: .82rem;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.viewer-actions{
  display:flex; gap:8px; flex:0 0 auto;
}
.iconbtn{
  cursor:pointer;
  border:1px solid var(--border);
  background: rgba(0,0,0,.16);
  color: var(--fg);
  padding: 9px 10px;
  border-radius: 12px;
}
.iconbtn:hover{ border-color: rgba(99,179,255,.35) }

.stage{
  position:relative;
  height: 620px;
  background: #000;
}
@media (max-width: 980px){ .stage{ height: 560px; } }
.stage iframe{
  position:absolute; inset:0;
  width:100%; height:100%;
  border:none;
  opacity:0;
  transform: scale(.985);
  transition: opacity .45s ease, transform .45s ease;
  pointer-events:none;
}
.stage iframe.active{
  opacity:1;
  transform: scale(1);
  pointer-events:auto;
}

/* ===== Dock ===== */
.dock{
  position:fixed;
  left:50%;
  bottom: 18px;
  transform: translateX(-50%);
  z-index:60;
  display:flex;
  gap:10px;
  padding: 10px 12px;
  border-radius: 999px;
  border:1px solid var(--border);
  background: rgba(10,12,16,.55);
  backdrop-filter: blur(12px);
  box-shadow: 0 18px 70px rgba(0,0,0,.55);
}
.dock .d{
  display:flex;
  align-items:center;
  gap:10px;
  border:1px solid transparent;
  background: rgba(255,255,255,.04);
  padding: 9px 12px;
  border-radius: 999px;
  cursor:pointer;
  transition: transform .12s ease, border-color .12s ease, background .12s ease;
  user-select:none;
}
.dock .d:hover{ transform: translateY(-1px); border-color: rgba(240,162,59,.22) }
.dock .d b{ font-family: var(--mono); font-size:.82rem }
.dock .d span{ color: var(--muted); font-family: var(--mono); font-size:.78rem }
.dock .dot{ width:8px;height:8px;border-radius:99px;background: var(--accent) }

/* ===== Command palette ===== */
.overlay-ui{
  position:fixed; inset:0;
  display:none;
  align-items:flex-start;
  justify-content:center;
  padding: 90px 16px 16px;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
  z-index: 100;
}
.overlay-ui.show{ display:flex; }
.palette{
  width:min(860px, 100%);
  border:1px solid var(--border);
  border-radius: 22px;
  background: rgba(10,12,16,.72);
  box-shadow: 0 40px 120px rgba(0,0,0,.75);
  overflow:hidden;
}
.palette-top{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 14px;
  border-bottom:1px solid var(--border);
}
.palette-top input{
  width:100%;
  border:none;
  outline:none;
  background: rgba(255,255,255,.06);
  color: var(--fg);
  padding: 12px 12px;
  border-radius: 14px;
  font-family: var(--mono);
  font-size: .95rem;
  border:1px solid rgba(255,255,255,.10);
}
.palette-list{
  max-height: 420px;
  overflow:auto;
  padding: 8px;
}
.cmd{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  padding: 12px;
  border-radius: 16px;
  border:1px solid transparent;
  cursor:pointer;
}
.cmd:hover{ background: rgba(255,255,255,.05); border-color: rgba(255,255,255,.08) }
.cmd b{ font-family: var(--mono); font-size:.92rem }
.cmd span{ color: var(--muted); font-family: var(--mono); font-size:.80rem; white-space:nowrap }
.cmd .k{ display:flex; gap:6px; align-items:center }
.smallkbd{
  font-family: var(--mono);
  font-size: .74rem;
  padding: 3px 7px;
  border-radius: 8px;
  border: 1px solid var(--border2);
  background: rgba(0,0,0,.25);
  color: var(--fg);
}

.footer{
  margin-top: 46px;
  padding-top: 18px;
  border-top: 1px solid rgba(255,255,255,.08);
  color: var(--muted);
  font-size: .88rem;
}
.footer a{ color: var(--fg); text-decoration: none; border-bottom: 1px dashed rgba(255,255,255,.28) }
.footer a:hover{ border-bottom-color: rgba(240,162,59,.6) }
</style>
</head>

<body>
<div class="noise"></div>
<div class="scanlines"></div>
<div class="glow" id="glow"></div>

<div class="wrap">

  <div class="topbar">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <h1>Dondlinger General Contracting LLC</h1>
        <p>FIELD SYSTEMS Â· LIVE LABS Â· 2026</p>
      </div>
    </div>

    <div class="actions">
      <div class="pill" title="Open Command Palette">
        <span style="font-family:var(--mono);color:var(--muted);font-size:.86rem">Command</span>
        <kbd>Ctrl</kbd><kbd>K</kbd>
      </div>
      <button class="btn" id="openPalette">Open</button>
    </div>
  </div>

  <section class="hero">
    <div class="card hero-left">
      <div class="tag"><span class="dot"></span> LIVE BUILD Â· REAL PROTOTYPES Â· NO MOCKUPS</div>
      <h2>Technological work built like construction: measured, field-tested, shipped.</h2>
      <p class="sub">This is a portfolio that behaves like a product. Pick a lab. Run it. Tear it apart. Open the source. ðŸ‘‡</p>

      <div class="grid-metrics">
        <div class="metric"><b>Mode</b><span>Labs OS</span></div>
        <div class="metric"><b>Focus</b><span>Automation Â· Interfaces Â· Systems</span></div>
        <div class="metric"><b>Shortcut</b><span>Ctrl+K / âŒ˜K</span></div>
      </div>
    </div>

    <div class="hero-right">
      <div class="card">
        <h3>Stack</h3>
        <div class="stack">
          <div class="chip accent">Hugging Face Spaces</div>
          <div class="chip blue">UI/JS</div>
          <div class="chip ok">Prototypes</div>
          <div class="chip">Field workflows</div>
          <div class="chip">Systems thinking</div>
          <div class="chip">Fast iteration</div>
        </div>
      </div>

      <div class="card">
        <h3>Operating Principle</h3>
        <p><span style="color:var(--fg)">If it canâ€™t survive real use, it doesnâ€™t ship.</span> These labs are meant to be run, clicked, broken, rebuilt.</p>
      </div>
    </div>
  </section>

  <div class="section-title">
    <h3>Labs</h3>
    <div class="hint">click left list Â· arrows switch Â· Ctrl+K jumps</div>
  </div>

  <section class="labs">
    <div class="card list" id="list"></div>

    <div class="card viewer">
      <div class="viewer-head">
        <div class="viewer-title">
          <b id="vTitle">â€”</b>
          <span id="vSub">â€”</span>
        </div>
        <div class="viewer-actions">
          <button class="iconbtn" id="openNew" title="Open Lab in new tab">â†—</button>
          <button class="iconbtn" id="reload" title="Reload Lab">âŸ³</button>
          <button class="iconbtn" id="copy" title="Copy Lab URL">â§‰</button>
        </div>
      </div>
      <div class="stage" id="stage"></div>
    </div>
  </section>

  <div class="footer">
    <div style="display:flex;gap:18px;flex-wrap:wrap;align-items:center;justify-content:space-between">
      <div>
        <div style="font-family:var(--mono);opacity:.9">Dondlinger General Contracting LLC</div>
        <div style="margin-top:6px">Contact: <a href="mailto:dondlingergeneralcontracting@gmail.com">dondlingergeneralcontracting@gmail.com</a></div>
      </div>
      <div style="font-family:var(--mono);opacity:.8">Built as a single-file OS landing. Ship fast.</div>
    </div>
  </div>

</div>

<!-- Dock -->
<div class="dock" id="dock"></div>

<!-- Command Palette -->
<div class="overlay-ui" id="overlayUI" aria-hidden="true">
  <div class="palette" role="dialog" aria-modal="true" aria-label="Command Palette">
    <div class="palette-top">
      <input id="q" placeholder="Type to jumpâ€¦ (e.g. fortress, taxidermy) â€” Enter opens" />
      <div class="k"><span class="smallkbd">Esc</span></div>
    </div>
    <div class="palette-list" id="cmds"></div>
  </div>
</div>

<script>
/* =========================
   CONFIG: YOUR LABS (KEEP)
   ========================= */
const LABS = [
  {
    id: "fortress",
    title: "Digital Fortress Builder",
    subtitle: "Interactive site builder + automation prototype",
    url: "https://john2121-dondlingergc-digital-fortress-builder.static.hf.space",
    tags: ["HF", "UI", "SYSTEM"],
    status: "LIVE",
    color: "accent"
  },
  {
    id: "wildpreserve",
    title: "Wild Preserve Taxidermy Studio",
    subtitle: "Visual studio + experiential concept",
    url: "https://john2121-wildpreserve-taxidermy-studio.static.hf.space",
    tags: ["HF", "VISUAL", "CONCEPT"],
    status: "LIVE",
    color: "blue"
  }
];

/* =========================
   STATE + DOM
   ========================= */
const list = document.getElementById("list");
const stage = document.getElementById("stage");
const vTitle = document.getElementById("vTitle");
const vSub = document.getElementById("vSub");
const dock = document.getElementById("dock");

const overlayUI = document.getElementById("overlayUI");
const q = document.getElementById("q");
const cmds = document.getElementById("cmds");

const openPaletteBtn = document.getElementById("openPalette");
const openNewBtn = document.getElementById("openNew");
const reloadBtn = document.getElementById("reload");
const copyBtn = document.getElementById("copy");

let idx = 0;
let iframes = [];

/* =========================
   HELPERS
   ========================= */
function el(tag, cls, html){
  const n = document.createElement(tag);
  if(cls) n.className = cls;
  if(html != null) n.innerHTML = html;
  return n;
}

function makeIframe(url){
  const f = document.createElement("iframe");
  f.dataset.src = url;              // lazy
  f.allow = "clipboard-write; clipboard-read";
  f.loading = "lazy";
  return f;
}

function loadIframe(i){
  const f = iframes[i];
  if(!f.src) f.src = f.dataset.src;
}

function setActive(i){
  idx = (i + LABS.length) % LABS.length;

  // stage
  iframes.forEach((f, k) => f.classList.toggle("active", k === idx));
  loadIframe(idx);

  // list state
  [...list.querySelectorAll(".item")].forEach((it, k) => it.classList.toggle("active", k === idx));

  // title/sub
  vTitle.textContent = LABS[idx].title;
  vSub.textContent = LABS[idx].subtitle + "  Â·  " + LABS[idx].url;

  // dock highlight
  [...dock.querySelectorAll(".d")].forEach((d, k) => d.style.borderColor = (k === idx) ? "rgba(240,162,59,.35)" : "transparent");
}

function copyText(t){
  navigator.clipboard?.writeText(t).catch(()=>{});
}

/* =========================
   BUILD LIST + STAGE + DOCK
   ========================= */
function build(){
  // LIST
  list.innerHTML = "";
  LABS.forEach((lab, i) => {
    const item = el("div","item");
    item.onclick = ()=> setActive(i);

    const thumb = el("div","thumb");
    const body = el("div","");

    const h = el("h4","", lab.title);
    const m = el("div","meta", lab.subtitle);

    const badges = el("div","badges");
    const st = el("span","badge " + (lab.status==="LIVE" ? "ok":"warn"), lab.status);
    badges.appendChild(st);

    lab.tags.forEach(t=>{
      const b = el("span","badge " + (t==="HF" ? "blue" : (t==="SYSTEM" ? "accent" : "")), t);
      badges.appendChild(b);
    });

    body.appendChild(h);
    body.appendChild(m);
    body.appendChild(badges);

    item.appendChild(thumb);
    item.appendChild(body);

    list.appendChild(item);
  });

  // STAGE
  stage.innerHTML = "";
  iframes = LABS.map(l => makeIframe(l.url));
  iframes.forEach((f,i)=> stage.appendChild(f));

  // DOCK
  dock.innerHTML = "";
  LABS.forEach((lab, i)=>{
    const d = el("div","d");
    d.onclick = ()=> setActive(i);
    d.innerHTML = `<div class="dot"></div><div><b>${lab.id}</b><br><span>${lab.status}</span></div>`;
    dock.appendChild(d);
  });

  setActive(0);
}

/* =========================
   COMMAND PALETTE
   ========================= */
function openPalette(){
  overlayUI.classList.add("show");
  overlayUI.setAttribute("aria-hidden","false");
  q.value = "";
  renderCommands("");
  setTimeout(()=>q.focus(), 0);
}
function closePalette(){
  overlayUI.classList.remove("show");
  overlayUI.setAttribute("aria-hidden","true");
}

function renderCommands(filter){
  const f = (filter||"").toLowerCase().trim();
  cmds.innerHTML = "";
  const rows = LABS
    .map((lab,i)=>({lab,i,hay:(lab.id+" "+lab.title+" "+lab.subtitle+" "+lab.tags.join(" ")).toLowerCase()}))
    .filter(x=> !f || x.hay.includes(f));

  rows.forEach((x, n)=>{
    const c = el("div","cmd");
    c.onclick = ()=>{
      setActive(x.i);
      closePalette();
    };
    c.innerHTML = `
      <div>
        <b>${x.lab.title}</b>
        <div style="margin-top:6px;color:var(--muted);font-family:var(--mono);font-size:.82rem">${x.lab.id} Â· ${x.lab.status} Â· ${x.lab.tags.join(" ")}</div>
      </div>
      <div class="k">
        <span class="smallkbd">Enter</span>
      </div>
    `;
    cmds.appendChild(c);
  });

  if(rows.length === 0){
    cmds.appendChild(el("div","cmd",`<div><b>No matches</b><div style="margin-top:6px;color:var(--muted);font-family:var(--mono);font-size:.82rem">Try another query.</div></div><div></div>`));
  }
}

openPaletteBtn.onclick = openPalette;

overlayUI.addEventListener("click",(e)=>{
  if(e.target === overlayUI) closePalette();
});

q.addEventListener("input",()=> renderCommands(q.value));

q.addEventListener("keydown",(e)=>{
  if(e.key === "Escape"){ closePalette(); return; }
  if(e.key === "Enter"){
    const first = cmds.querySelector(".cmd");
    if(first) first.click();
  }
});

/* global keybind */
document.addEventListener("keydown",(e)=>{
  const isMac = navigator.platform.toLowerCase().includes("mac");
  const mod = isMac ? e.metaKey : e.ctrlKey;

  if(mod && e.key.toLowerCase() === "k"){
    e.preventDefault();
    if(overlayUI.classList.contains("show")) closePalette(); else openPalette();
  }

  if(!overlayUI.classList.contains("show")){
    if(e.key === "ArrowRight") setActive(idx+1);
    if(e.key === "ArrowLeft") setActive(idx-1);
  }

  if(e.key === "Escape" && overlayUI.classList.contains("show")) closePalette();
});

/* viewer actions */
openNewBtn.onclick = ()=> window.open(LABS[idx].url, "_blank", "noopener,noreferrer");
reloadBtn.onclick = ()=>{
  const f = iframes[idx];
  if(f.src){
    const s = f.src;
    f.src = "about:blank";
    setTimeout(()=> f.src = s, 40);
  }else{
    loadIframe(idx);
  }
};
copyBtn.onclick = ()=> copyText(LABS[idx].url);

/* =========================
   CURSOR GLOW
   ========================= */
const glow = document.getElementById("glow");
window.addEventListener("pointermove",(e)=>{
  document.body.style.setProperty("--mx", e.clientX + "px");
  document.body.style.setProperty("--my", e.clientY + "px");
});
window.addEventListener("blur",()=> glow.style.opacity = .35);
window.addEventListener("focus",()=> glow.style.opacity = .85);

/* =========================
   INIT
   ========================= */
build();
</script>
</body>
</html>
